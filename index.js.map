{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const API_KEY = '46037450-a04b7b74a12a46e49ae394c24';\nexport const BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 15;\n\nlet page = 1;\n\nexport async function fetchImages(searchImages, currentPage = 1) {\n  const options = new URLSearchParams({\n    key: API_KEY,\n    q: searchImages,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: PER_PAGE,\n  });\n\n  const url = `${BASE_URL}?${options}`;\n\n  try {\n    const {\n      data: { hits, totalHits, total },\n    } = await axios.get(url);\n\n    return { hits, totalHits,total }; \n  } catch (error) {\n    console.error(error); \n    throw  new Error; \n  }\n\n  \n}\n\n","\nexport function renderMarkup(hits, gallery) {\n  const markup = hits.map(hit => `\n    <a href=\"${hit.largeImageURL}\" class=\"gallery-item\">\n      <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" />\n      <ul class=\"info\">\n        <li><p>Likes</p> ${hit.likes}</li>\n        <li><p>Views</p> ${hit.views}</li>\n        <li><p>Comments</p> ${hit.comments}</li>\n        <li><p>Downloads</p> ${hit.downloads}</li>\n      </ul>\n    </a>`).join(``);\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\n\n\n","\nimport { API_KEY, BASE_URL, PER_PAGE } from './js/pixabay-api';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst form = document.querySelector(`.search-form-js`)\nconst gallery = document.querySelector(`.gallery-js`)\nconst loadMoreButton = document.querySelector(`.load-more`);\nconst loadingIndicator = document.querySelector(`.loading-indicator`);\n\n\nlet lightbox = new SimpleLightbox('.gallery-item', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet searchImages = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener(`submit`, onSubmit)\nloadMoreButton.addEventListener(`click`,loadMoreImages)\n\nasync function onSubmit(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  \n  searchImages = form.elements.query.value;\n\n  if (searchImages === '') {\n    iziToast.error({\n      title: 'No Results',\n      message: 'Please enter a search query.',\n      position: 'topRight',\n    });\n    return; \n  }\n  \n  page = 1;\n\n  gallery.innerHTML = ''; \n  loadMoreButton.style.display = 'none'; \n  loadingIndicator.style.display = 'block'; \n\n\n  try {\n    const { hits, totalHits: total } = await fetchImages(searchImages, page);\n\n    totalHits = total;\n\n    renderMarkup(hits, gallery);\n    \n    lightbox.refresh();\n\n    if (hits.length > 0 && totalHits > PER_PAGE) {\n      loadMoreButton.style.display = 'block'; \n    } else if (totalHits === 0) {\n      iziToast.error({\n        title: 'No Results',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n  } catch (error){\n    console.log(error);\n    iziToast.error({\n      title: 'No Results',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    loadingIndicator.style.display = 'none';\n    form.reset();\n  }\n}\n\nasync function loadMoreImages() {\n  loadingIndicator.style.display = 'block'; \n  page++; \n\n  try {\n    const { hits } = await fetchImages(searchImages, page);\n    renderMarkup(hits, gallery); \n\n    lightbox.refresh(); \n\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    \n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const totalDisplayedImages = gallery.querySelectorAll('.gallery-item').length;\n    if (totalDisplayedImages >= totalHits) {\n      loadMoreButton.style.display = 'none'; \n      iziToast.info({\n        title: 'Information',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'No Results',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    loadingIndicator.style.display = 'none'; \n  }\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","searchImages","currentPage","options","url","hits","totalHits","total","axios","error","renderMarkup","gallery","markup","hit","form","loadMoreButton","loadingIndicator","lightbox","SimpleLightbox","page","onSubmit","loadMoreImages","event","iziToast","cardHeight"],"mappings":"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"}